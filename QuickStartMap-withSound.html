<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <title>University of Oregon Mapping</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

    <!-- Mapbox JavaScript -->
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.1.0/mapbox-gl.js'></script>
    <!-- Mapbox CSS -->
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.1.0/mapbox-gl.css' rel='stylesheet' />

    <!-- Link to google gont -->
    <link rel='preconnect' href='https://fonts.gstatic.com'>
    <link href='https://fonts.googleapis.com/css2?family=Pacifico&display=swap' rel='stylesheet'>

    <style>
      /* Base resets */
      body { margin:0; padding:0; }
      #map { position:absolute; top:0; bottom:0; width:100%; }

      /* Mapbox pop-up overrides */
      .mapboxgl-popup {
        min-width: 325px;
        font-family: 'Pacifico', cursive;
        font-size: 14px;
      }

      /* Fly buttons */
      .fly {
        display: inline-block;
        position: relative;
        margin: 10px;
        padding: 10px;
        border-style: solid;
        border-color: oldlace;
        border-radius: 3px;
        font-size: 1em;
        font-weight: bold;
        color: oldlace;
        background: DarkRed;
        cursor: pointer;
      }

      /* Button font */
      button {
        font-family: 'Pacifico', cursive;
        font-weight: 600;
      }

      /* Popup image styling */
      .popupImage {
        width: 100%;
      }
    </style>
  </head>

  <body>
    <!-- Map container -->
    <div id='map'></div>

    <!-- Fly-to buttons -->
    <button class='fly' id='PortlandButton'>Jump to Portland</button>
    <button class='fly' id='LondonButton'>Jump to London</button>
    <button class='fly' id='YellowstoneButton'>Jump to Yellowstone</button>

    <script>
      // Mapbox access token
      mapboxgl.accessToken = 'pk.eyJ1Ijoiam9tZXJzb24iLCJhIjoiY2o1bXE2bHlyMnJhZDMzbnpyMnhlODdpcSJ9.QJMJ_cTFCY050aZfSn1umQ';

      // Initialize the map
      var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/outdoors-v11',
        center: [-110.74524187568, 44.706216445069],  // Portland
        zoom: 13
      });

      /***  POPUPS  ***/
      // Popup for marker 1
      var popup1_content = '<h2>Play the video to listen to Portland</h2><br>';
      popup1_content += '<iframe width="300px" src="https://www.youtube.com/embed/z1AdmS-LqyA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><br>';
      popup1_content += 'Source: Ian Lind, <a href="https://www.youtube.com/embed/z1AdmS-LqyA">YouTube</a>';
      var popup1 = new mapboxgl.Popup({ minWidth: '300px' })
        .setHTML(popup1_content);

      // Popup for marker 2
      var popup2_content = '<h2>Press play to listen to London in 1928</h2><br>';
      popup2_content += '<iframe width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/londonstreetnoises/cromwell-1928&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false"></iframe><br>';
      popup2_content += 'Source: LondonStreetNoises.co.uk, <a href="https://soundcloud.com/londonstreetnoises">SoundCloud</a>';
      var popup2 = new mapboxgl.Popup({ minWidth: '300px' })
        .setHTML(popup2_content);

      // Popup for marker 3
      var popup3_content = '<h2>Press play to listen to a bison eating</h2><br>';
      popup3_content += '<audio controls><source src="yell-YELLBisonEating150313.mp3" type="audio/mpeg">Your browser does not support the audio element.</audio><br>';
      popup3_content += 'Source: NPS/Jennifer Jerret, <a href="https://www.nps.gov/yell/learn/photosmultimedia/sounds-bisoneating.htm">NPS</a><br>';
      popup3_content += '<img class="popupImage" src="https://www.nps.gov/yell/learn/photosmultimedia/images/ndh-yell-bison-gibbon_2.jpg?maxwidth=1200&maxheight=1200&autorotate=false" alt="A bison eating grass in Yellowstone National Park"><br>';
      popup3_content += 'Source: NPS/Neal Herbert, <a href="https://www.nps.gov/yell/learn/photosmultimedia/sounds-bisoneating.htm">NPS</a>';
      var popup3 = new mapboxgl.Popup({ minWidth: '300px' })
        .setHTML(popup3_content);
      /***  END POPUPS  ***/

      /***  MARKERS  ***/
      var marker1 = new mapboxgl.Marker({ color: 'DarkRed' })
        .setLngLat([-122.6788, 45.5212])
        .setPopup(popup1)
        .addTo(map);

      var marker2 = new mapboxgl.Marker({ color: 'DarkRed' })
        .setLngLat([-0.1534307, 51.501223])
        .setPopup(popup2)
        .addTo(map);

      var marker3 = new mapboxgl.Marker({ color: 'DarkRed' })
        .setLngLat([-110.74524187568, 44.706216445069])
        .setPopup(popup3)
        .addTo(map);
      /***  END MARKERS  ***/

      /***  LISTENERS  ***/
      document.getElementById('LondonButton').addEventListener('click', function () {
        map.jumpTo({
          center: [-0.1534307, 51.501223],
          zoom: 11
        });
      });

      document.getElementById('PortlandButton').addEventListener('click', function () {
        map.jumpTo({
          center: [-122.6788, 45.5212],
          zoom: 9
        });
      });

      document.getElementById('YellowstoneButton').addEventListener('click', function () {
        map.jumpTo({
          center: [-110.74524187568, 44.706216445069],
          zoom: 9
        });
      });
      /***  END LISTENERS  ***/
    </script>
  </body>

</html>
